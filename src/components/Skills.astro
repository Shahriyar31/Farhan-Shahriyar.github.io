---
const skillData = {
  technical: {
    title: "Technical Skills",
    icon: "fa-solid fa-brain",
    skills: [
      { name: "Supervised Learning", icon: { type: 'fa', value: 'fas fa-chart-line' }, color: "#28a745" },
      { name: "Unsupervised Learning", icon: { type: 'fa', value: 'fas fa-project-diagram' }, color: "#28a745" },
      { name: "Deep Learning", icon: { type: 'fa', value: 'fas fa-robot' }, color: "#6f42c1" },
      { name: "Computer Vision", icon: { type: 'fa', value: 'fas fa-eye' }, color: "#fd7e14" },
      { name: "ETL Pipelines", icon: { type: 'fa', value: 'fas fa-cogs' }, color: "#17a2b8" },
      { name: "Data Warehousing", icon: { type: 'fa', value: 'fas fa-warehouse' }, color: "#17a2b8" },
      { name: "CI/CD", icon: { type: 'fa', value: 'fas fa-sync-alt' }, color: "#6c757d" },
    ]
  },
  tools: {
    title: "Tools & Technologies",
    icon: "fa-solid fa-screwdriver-wrench",
    skills: [
      { name: "Python", icon: { type: 'fa', value: 'fab fa-python' }, color: "#3776AB" },
      { name: "SQL", icon: { type: 'fa', value: 'fas fa-database' }, color: "#4479A1" },
      { name: "TensorFlow", icon: { type: 'svg', value: 'M3.6 0L0 2.1v19.8l3.6 2.1 16.8-9.9V9.9L3.6 0zm16.8 9.9l-4.2 2.5v4.9l4.2-2.5v-4.9z' }, color: "#FF6F00" },
      { name: "PyTorch", icon: { type: 'svg', value: 'M13.6,3.2C12.8,2.7,11.9,2.4,11,2.4c-1.3,0-2.6,0.5-3.6,1.4c-0.3,0.3-0.5,0.6-0.7,0.9c-0.8,1.3-1,2.8-0.7,4.3c0.2,0.9,0.5,1.7,1,2.5c0.3,0.4,0.6,0.8,1,1.1c1,0.9,2.2,1.4,3.5,1.4c1.1,0,2.2-0.3,3.1-0.9c0.5-0.3,0.9-0.7,1.3-1.2c0.3-0.4,0.5-0.8,0.7-1.3c0.3-0.9,0.5-1.9,0.5-2.8c0-1.2-0.2-2.3-0.7-3.4c-0.2-0.5-0.5-1-0.8-1.4C14.8,3.9,14.2,3.5,13.6,3.2z M21.7,4.3c-0.3-0.3-0.6-0.5-1-0.7c-1.3-0.8-2.8-1-4.3-0.7c-0.9,0.2-1.7,0.5-2.5,1c-0.4,0.3-0.8,0.6-1.1,1c-0.9,1-1.4,2.2-1.4,3.5c0,1.1,0.3,2.2,0.9,3.1c0.3,0.5,0.7,0.9,1.2,1.3c0.4,0.3,0.8,0.5,1.3,0.7c0.9,0.3,1.9,0.5,2.8,0.5c1.2,0,2.3-0.2,3.4-0.7c-0.5,0.2-1,0.5-1.4,0.8c0.6-0.5,1.1-1.1,1.5-1.7c0.2-0.3,0.3-0.5,0.5-0.8c0.2-0.5,0.4-1.1,0.5-1.7c0.1-0.5,0.2-1.1,0.2-1.7C22.2,6,22,4.9,21.7,4.3z M2.3,19.7c0.3,0.3,0.6,0.5,1,0.7c1.3,0.8,2.8,1,4.3,0.7c0.9-0.2,1.7-0.5,2.5-1c0.4-0.3,0.8-0.6,1.1-1c0.9-1,1.4,2.2,1.4-3.5c0-1.1-0.3-2.2-0.9-3.1c-0.3-0.5-0.7-0.9-1.2-1.3c-0.4-0.3-0.8-0.5-1.3-0.7c-0.9-0.3-1.9-0.5-2.8-0.5c-1.2,0-2.3,0.2-3.4,0.7c-0.5,0.2-1,0.5-1.4,0.8C2,12.9,1.5,13.5,1.1,14.1c-0.2,0.3-0.3,0.5-0.5,0.8C0.2,15.4,0,16,0,16.5c0,0.5,0.1,1.1,0.2,1.7C0.7,19.4,1.4,20,2.3,19.7z' }, color: "#EE4C2C" },
      { name: "Scikit-learn", icon: { type: 'fa', value: 'fas fa-chart-pie' }, color: "#F7931E" },
      { name: "Apache Kafka", icon: { type: 'svg', value: 'm23.9 9.3-2.7-2.3v.1L12 0 2.8 7.1l-2.7 2.3L0 9.2l12 12 12-12-0.1-.1zM12 2.8l7.1 5.4-2.1 1.8-5-4.1-5 4.1-2.1-1.8L12 2.8zm0 21.1L.1 12.1l2.7 2.3v-.1l2.7 2.3 6.5-5.3 6.5 5.3 2.7-2.3v.1l2.7-2.3L12 23.9z' }, color: "#231F20" },
      { name: "Spark", icon: { type: 'fa', value: 'fas fa-fire' }, color: "#E25A1C" },
      { name: "AWS", icon: { type: 'fa', value: 'fab fa-aws' }, color: "#FF9900" },
      { name: "GCP", icon: { type: 'fa', value: 'fab fa-google' }, color: "#4285F4" },
      { name: "Docker", icon: { type: 'fa', value: 'fab fa-docker' }, color: "#2496ED" },
      { name: "Git", icon: { type: 'fa', value: 'fab fa-git-alt' }, color: "#F05032" },
    ]
  },
  professional: {
    title: "Professional Skills",
    icon: "fa-solid fa-comments",
     skills: [
      { name: "Communicator", icon: { type: 'fa', value: 'fas fa-bullhorn' }, color: "#007bff" },
      { name: "Team-oriented", icon: { type: 'fa', value: 'fas fa-users' }, color: "#28a745" },
      { name: "Quick Learner", icon: { type: 'fa', value: 'fas fa-rocket' }, color: "#6f42c1" },
      { name: "Adaptable", icon: { type: 'fa', value: 'fas fa-recycle' }, color: "#ffc107" },
    ]
  }
};
---
<section id="skills" class="section">
    <div class="container mx-auto px-4 pr-20 lg:pr-4 py-16">
        <h2 class="text-4xl font-bold uppercase text-center mb-16 text-slate-900 dark:text-white section-title">
            <span>My </span>
            <span class="text-blue-500">Skills</span>
        </h2>

        <div class="mb-16">
            <h3 class="flex items-center text-2xl font-bold text-slate-800 dark:text-slate-200 mb-8 section-title">
                <i class=`${skillData.technical.icon} mr-3 text-blue-500`></i>
                {skillData.technical.title}
            </h3>
            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-1">
                {skillData.technical.skills.map(skill => (
                    <div class="skill-card">
                        <div class="skill-card-icon">
                            {skill.icon.type === 'fa' ? (
                                <i class={`${skill.icon.value}`} style={`color: ${skill.color}`}></i>
                            ) : (
                                <svg viewBox="0 0 24 24" style={`fill: ${skill.color}`}>
                                    <path d={skill.icon.value}></path>
                                </svg>
                            )}
                        </div>
                        <span class="skill-card-name">{skill.name}</span>
                    </div>
                ))}
            </div>
        </div>

        <div class="mb-16">
            <h3 class="flex items-center text-2xl font-bold text-slate-800 dark:text-slate-200 mb-8 section-title">
                <i class=`${skillData.tools.icon} mr-3 text-emerald-500`></i>
                {skillData.tools.title}
            </h3>
            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-1">
                 {skillData.tools.skills.map(skill => (
                    <div class="skill-card">
                        <div class="skill-card-icon">
                            {skill.icon.type === 'fa' ? (
                                <i class={`${skill.icon.value}`} style={`color: ${skill.color}`}></i>
                            ) : (
                                <svg viewBox="0 0 24 24" style={`fill: ${skill.color}`}>
                                    <path d={skill.icon.value}></path>
                                </svg>
                            )}
                        </div>
                        <span class="skill-card-name">{skill.name}</span>
                    </div>
                ))}
            </div>
        </div>

        <div>
            <h3 class="flex items-center text-2xl font-bold text-slate-800 dark:text-slate-200 mb-8 section-title">
                <i class=`${skillData.professional.icon} mr-3 text-pink-500`></i>
                {skillData.professional.title}
            </h3>
            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-1">
                 {skillData.professional.skills.map(skill => (
                    <div class="skill-card">
                         <div class="skill-card-icon">
                            <i class={`${skill.icon.value}`} style={`color: ${skill.color}`}></i>
                        </div>
                        <span class="skill-card-name">{skill.name}</span>
                    </div>
                ))}
            </div>
        </div>
    </div>
</section>

<style>
    .skill-card {
        @apply relative flex flex-col items-center justify-center p-1
               rounded-lg
               bg-white/40 dark:bg-slate-800/60 backdrop-blur-lg 
               border border-white/20 dark:border-slate-700/50
               transition-all duration-300 ease-in-out;
        
        min-height: 60px; /* Ensures cards have a minimum height */
        transform-style: preserve-3d;
        transform: perspective(1000px);
    }
    .skill-card:hover {
        transform: translateY(-5px);
        @apply shadow-xl;
    }

    .skill-card-icon {
        @apply w-5 h-5 flex items-center justify-center;
        transform: translateZ(10px);
    }
    .skill-card-icon i, .skill-card-icon svg {
        @apply text-xl h-5 w-5;
    }

    .skill-card-name {
        @apply font-medium text-center text-slate-700 dark:text-slate-300 pt-1;
        font-size: 10px; /* Using a fixed small font size */
        line-height: 1.2;
        transform: translateZ(5px);
    }
</style>

<script>
    import { gsap } from "gsap";

    document.addEventListener('DOMContentLoaded', () => {
        const isTouchDevice = () => 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        const cards = document.querySelectorAll('.skill-card');

        if (!isTouchDevice()) {
            cards.forEach(card => {
                const icon = card.querySelector('.skill-card-icon');
                const name = card.querySelector('.skill-card-name');

                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left - rect.width / 2;
                    const y = e.clientY - rect.top - rect.height / 2;

                    gsap.to(card, {
                        rotationY: x * 0.15,
                        rotationX: -y * 0.15,
                        ease: "power1.out",
                        duration: 0.8
                    });
                    gsap.to(icon, { x: x * 0.2, y: y * 0.2, ease: "power1.out", duration: 1.2 });
                    gsap.to(name, { x: x * 0.1, y: y * 0.1, ease: "power1.out", duration: 1.2 });
                });

                card.addEventListener('mouseleave', () => {
                    gsap.to([card, icon, name], {
                        rotationX: 0,
                        rotationY: 0,
                        x: 0,
                        y: 0,
                        ease: "elastic.out(1, 0.5)",
                        duration: 1.5
                    });
                });
            });
        }
    });
</script>